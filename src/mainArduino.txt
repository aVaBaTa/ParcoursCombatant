


#include "settings.h"
#include <Wire.h>

int screen_output;
int screen_display = 0;
int bouton_selection = 1;

void setup()
{
    Wire.begin();
    BoardInit();
    Serial.begin(9600);
}

void loop()
{

    if (screen_display == 0)
    {
        if (ROBUS_IsBumper(3))
        {
            screen_output = 1;
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            bouton_selection = 1;
            delay(250);
        }
    }

    else if (screen_display == 1)
    {
        if (ROBUS_IsBumper(2)) // CHANGER SÉLECTION
        {
            if (bouton_selection < 3)
            {
                bouton_selection += 1;
            }
            else
            {
                bouton_selection = 1;
            }
            delay(250);
        }
        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {

            if (bouton_selection == 1)
            {
                screen_output = 2;
            }
            if (bouton_selection == 2)
            {
                screen_output = 6;
            }
            if (bouton_selection == 3)
            {
                screen_output = 7;
            }

            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;



            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            delay(250);
        }
    }


    // DEMANDE SI DEPOSER LES CLEES
    else if (screen_display == 2)
    {
        if (ROBUS_IsBumper(2)) // CHANGER SÉLECTION
        {
            if (bouton_selection < 2)
            {
                bouton_selection += 1;
            }
            else
            {
                bouton_selection = 1;
            }
            delay(250);
        }
        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {



            // Si Oui || == 1 Mets en memoire deposer les clees 
            if (bouton_selection == 1)
            {
                screen_output = 3;
            }
            if (bouton_selection == 2)
            {
                screen_output = 4;
            }
         

            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;



            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            delay(250);
        }
    }

    // Screen Deposer les clees Pour Reserver la Chambre
    else if (screen_display == 3)
    {

        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {
        
            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;

            // Renvoie a reserver la chambre
            screen_output = 4;
            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;

            delay(250);
        }
    }
     
     

 
  // RESERVER LA CHAMBRE
    else if (screen_display == 4)
    {
        if (ROBUS_IsBumper(2)) // CHANGER SÉLECTION
        {
            if (bouton_selection < 3)
            {
                bouton_selection += 1;
            }
            else
            {
                bouton_selection = 1;
            }
            delay(250);
        }
        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {
            if (bouton_selection == 1)
            {

                // si la clé n a pas été selectionné ca va chercher la clé de chambre
	            // si la clé a été selectionné ca va porter la clé de voiture et va chercher la clé de chambre
                


                // METTRE LE CODE POUR ALLER A LA CHAMBRE 1
            }
            if (bouton_selection == 2)
            {

                // si la clé n a pas été selectionné ca va chercher la clé de chambre
	            // si la clé a été selectionné ca va porter la clé de voiture et va chercher la clé de chambre
                

                // METTRE LE CODE POUR ALLER A LA CHAMBRE 2
            }
            if (bouton_selection == 3)
            {
                // si la clé n a pas été selectionné ca va chercher la clé de chambre
	            // si la clé a été selectionné ca va porter la clé de voiture et va chercher la clé de chambre
                

                // METTRE LE CODE POUR ALLER A LA CHAMBRE 3
            }
            if (bouton_selection == 4)
            {
                // si la clé n a pas été selectionné ca va chercher la clé de chambre
	            // si la clé a été selectionné ca va porter la clé de voiture et va chercher la clé de chambre
                

                // METTRE LE CODE POUR ALLER A LA CHAMBRE 4
            }

            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;
            

            //Merci 
            screen_output = -2;

            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;

            delay(250);
        }
    }
    // Remise de clees de chambres
    else if (screen_display == 5)
    {
        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {
            

            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;


//****************************************
            screen_output = 8;
//****************************************

            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            delay(5000);

            // remettre a 0 le programme
            screen_display = 0;
            screen_output = 0;
        }
    }



    // RECUPERER SES CLEES
    else if (screen_display == 6)
    {

        
        
       // LE CODE POUR RECUPERER SES CLEES
        //RFID
        // GARDER EN MEMOIRE LA PERSONNE DU RFID
        // AFFICHER MERCI BONNE JOURNEE
        // DEPLACEMENT SELON RFID


        screen_output = 5;
        
        Wire.beginTransmission(9);
        Wire.write(screen_output);
        Wire.endTransmission();
        screen_display = screen_output;
        delay(250);
    }

    // LIVRAISON DE COLIS
    else if (screen_display == 7)
    {
        
       // LE CODE POUR RECUPERER SES CLEES

        if (ROBUS_IsBumper(2)) // CHANGER SÉLECTION
        {
            if (bouton_selection < 4)
            {
                bouton_selection += 1;
            }
            else
            {
                bouton_selection = 1;
            }
            delay(250);
        }

        // GARDER EN MEMOIRE LA PERSONNE DU RFID
        // AFFICHER MERCI BONNE JOURNEE
        // DEPLACEMENT SELON RFID


        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION
        {
            // AFFICHER MERCI
            
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            delay(250);

            if (bouton_selection == 1)
            {
                // LE CODE DE LIVRAISON DE COLIS POUR LA CHAMBRE 1
            }
            if (bouton_selection == 2)
            {
                // LE CODE DE LIVRAISON DE COLIS POUR LA CHAMBRE 2
            }
            if (bouton_selection == 3)
            {
                // LE CODE DE LIVRAISON DE COLIS POUR LA CHAMBRE 3
            }
            if (bouton_selection == 4)
            {
                // LE CODE DE LIVRAISON DE COLIS POUR LA CHAMBRE 4
            }


            // MERCI BONNE JOURNEE

            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;

        // LE CODE DE REMISE A 0 DE L'ECRAN
            // remet bouton a 1 lorsque confimer
        /* bouton_selection = 1;

            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = screen_output;
            delay(250);

        */

            delay(250);
        }  
    }
    

    // MERCI BONNE JOURNEE
    else if (screen_display == 8)
    {
        if (ROBUS_IsBumper(3)) // CONFIRMER SÉLECTION ou Delay a decider
        {
                        
        // LE CODE DE REMISE A 0 DE L'ECRAN
            // remet bouton a 1 lorsque confimer
            bouton_selection = 1;

            // ENVOYER L'ACTION AU LCD
            Wire.beginTransmission(9);
            Wire.write(screen_output);
            Wire.endTransmission();
            screen_display = 10;
            delay(250);

        }

    }
    
}
